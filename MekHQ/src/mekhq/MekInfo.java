/*
 * MekInfo.java
 *
 * Created on July 24, 2009, 2:56 PM
 */

package mekhq;

import java.awt.Component;
import java.awt.Image;
import java.io.IOException;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import megamek.client.ui.swing.MechTileset;
import megamek.common.Entity;

/**
 * This JPanel borrows extensively from the MechInfo in MekWars
 * @author  Jay Lawson <jaylawson39 at yahoo.com>
 */
public class MekInfo extends JPanel {
    
    protected static MechTileset mt;
    
    /** Creates new form MekInfo */
    public MekInfo() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblImage = new javax.swing.JLabel();

        setName("Form"); // NOI18N
        setLayout(new java.awt.GridLayout());

        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(mekhq.MekHQApp.class).getContext().getResourceMap(MekInfo.class);
        lblImage.setIcon(resourceMap.getIcon("lblImage.icon")); // NOI18N
        lblImage.setText(resourceMap.getString("lblImage.text")); // NOI18N
        lblImage.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        lblImage.setName("lblImage"); // NOI18N
        add(lblImage);
    }// </editor-fold>//GEN-END:initComponents


    public void setText(String text) {
        lblImage.setText(text);
    }
    
    public void setImage(Image img) {
        lblImage.setIcon(new ImageIcon(img));
    }
    
    public void setUnit(Entity m) {
        Image unit = getImageFor(m, lblImage);     
        setImage(unit);
    }
    
    public static Image getImageFor(Entity m, Component c) {

        if (mt == null) {
            mt = new MechTileset("data/images/units/");
            try {
                mt.loadFromFile("mechset.txt");
            } catch (IOException ex) {
                //TODO: do something here
            }
        }// end if(null tileset)
        return mt.imageFor(m, c);
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel lblImage;
    // End of variables declaration//GEN-END:variables

}
